var CollapsableQuintRenderer = new Class({
    
    Extends: CollapsableRenderer,    
    defaultUncollapsingStyles:undefined,
	  defaultCollapsingStyles:undefined,
	  unCollapsingStyles:undefined,
	  collapsingStyles: undefined,
	  myFx: undefined,
	
    draw: function(component)
    {
      this.panel = new Element('div', {'id': this.innerDivName(component.getName())}).inject(this.container);
      this.defaultCollapsingStyles = {"height": "0px", "padding-top":"0px", "padding-bottom":"0px"};
      this.defaultUncollapsingStyles = 
        {"height": this.panel.getScrollSize().y, 
         "padding-top":this.panel.originalPaddingTop,
         "padding-bottom":this.panel.originalPaddingBottom};
      this.panel.setStyles(this.defaultCollapsingStyles);

      this.myFx = new Fx.Morph(this.panel, 
        {transition: "Quint:out"});
        
      
        
    },
    
    updateWhenDrawn:function (component)
    {
      this.parent(component);
      this.collapseBehaviour(component);
      this.setCurrentClasses();
    },
		
    collapseBehaviour: function(component)
    {	
			this.removeClass(this.COLLAPSED);
			this.removeClass(this.UNCOLLAPSED);
			
			this.myFx.cancel();
			this.myFx.$events = {};
			
			if (component.isCollapsed()){
			  this.startCollapseFx();
			  this.addClass(this.COLLAPSED);
			}else{
			  this.startUncollapseFx();
			  this.addClass(this.UNCOLLAPSED);
			}
    },
    
    startCollapseFx: function(){
		if (!$defined(this.collapsingStyles)) {
			this.myFx.start(this.defaultCollapsingStyles);
		}
		else {
			this.myFx.start(this.collapsingStyles);
      }
    },
  
    startUncollapseFx: function(){
      if (!$defined(this.unCollapsingStyles)) {
        this.myFx.start(this.defaultUncollapsingStyles);
      }
      else {
        
        this.myFx.start(this.unCollapsingStyles);
        console.log(this.unCollapsingStyles);
      }
    }, 
    
    setUnCollapsingStyles: function(styles){
      this.unCollapsingStyles = styles;
    },
    
   
    setCollapsingStyles: function(styles){
      this.collapsingStyles = styles;
    }

});
